---
description: Risk management rules and safety guidelines
---

# Risk Management Guidelines

File: [risk_manager.py](mdc:risk_manager.py)

## Core Principles

1. **Never trade more than you can afford to lose**
2. **Always use stop losses**
3. **Test on testnet first**
4. **Start with small positions**
5. **Monitor funding rates**

## Position Sizing

```python
# Calculate position size
position_value = balance * (position_size_pct / 100)
quantity = position_value / current_price

# Apply leverage
leveraged_quantity = quantity * leverage
```

### Configuration Limits

```python
# Conservative settings
POSITION_SIZE_PCT = 50-70
LEVERAGE = 1-3
STOP_LOSS_PCT = 1.5-2.5

# Moderate settings
POSITION_SIZE_PCT = 70-90
LEVERAGE = 3-5
STOP_LOSS_PCT = 2.0-3.0

# Aggressive settings (NOT RECOMMENDED)
POSITION_SIZE_PCT = 90-100
LEVERAGE = 5-10
STOP_LOSS_PCT = 3.0-5.0
```

## Stop Loss & Take Profit

### Stop Loss
- **Minimum**: 1.0% (very tight)
- **Recommended**: 2.0%
- **Maximum**: 5.0% (loose)

### Take Profit
- Should be at least 2x stop loss (risk/reward ratio)
- **Conservative**: 3-5%
- **Moderate**: 5-7%
- **Aggressive**: 7-10%

### Trailing Stop
- Follows price to lock in profits
- Distance: 1-3% from current price
- Activates after price moves favorably

## Daily Loss Limit

```python
MAX_DAILY_LOSS_PCT = 5.0  # Stop trading if -5% in 24h
```

When limit reached:
1. Bot stops opening new positions
2. Existing positions remain active
3. Resets at midnight UTC
4. Log warning to database

## Leverage Rules

**Never exceed:**
- 3x for beginners
- 5x for intermediate
- 10x for advanced (high risk)

**Remember:**
- Higher leverage = higher liquidation risk
- Binance can liquidate at ~80% loss on isolated margin
- Use isolated margin (not cross) for safety

## Funding Rates

Binance charges funding every 8 hours:
- Typical rate: 0.01% per 8h (~10% annually)
- Check with: `python tools/test_funding_rate.py`
- High rates increase holding costs
- Consider closing positions before funding

## Pre-Trade Checks

Before every trade, verify:
1. ✅ Balance sufficient
2. ✅ Signal confidence ≥ MIN_CONFIDENCE
3. ✅ Stop loss set
4. ✅ Take profit set
5. ✅ Daily loss limit not exceeded
6. ✅ Risk per trade acceptable

## Emergency Procedures

### If Bot Crashes
1. Check `bot.db` for open positions
2. Use `python tools/check_position.py`
3. Manually close on Binance if needed
4. Review logs for cause

### If Liquidation Risk
1. Reduce leverage immediately
2. Add margin if available
3. Close partial position
4. Move stop loss closer

### If Unexpected Losses
1. Stop the bot
2. Review recent trades in database
3. Check if strategy rules are correct
4. Backtest recent period
5. Adjust risk parameters before restarting
